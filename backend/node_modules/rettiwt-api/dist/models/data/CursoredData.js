"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Cursor = exports.CursoredData = void 0;
var Data_1 = require("../../enums/Data");
var JsonUtils_1 = require("../../helper/JsonUtils");
var Notification_1 = require("./Notification");
var Tweet_1 = require("./Tweet");
var User_1 = require("./User");
/**
 * The data that is fetched batch-wise using a cursor.
 *
 * @typeParam T - Type of data to be stored.
 *
 * @public
 */
var CursoredData = /** @class */ (function () {
    /**
     * @param response - The raw response.
     * @param type - The base type of the data included in the batch.
     */
    function CursoredData(response, type) {
        var _a, _b, _c, _d, _e, _f;
        /** The batch of data of the given type. */
        this.list = [];
        /** The cursor to the next batch of data. */
        this.next = new Cursor('');
        if (type == Data_1.EBaseType.TWEET) {
            this.list = Tweet_1.Tweet.list(response);
            this.next = new Cursor((_b = (_a = (0, JsonUtils_1.findByFilter)(response, 'cursorType', 'Bottom')[0]) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : '');
        }
        else if (type == Data_1.EBaseType.USER) {
            this.list = User_1.User.list(response);
            this.next = new Cursor((_d = (_c = (0, JsonUtils_1.findByFilter)(response, 'cursorType', 'Bottom')[0]) === null || _c === void 0 ? void 0 : _c.value) !== null && _d !== void 0 ? _d : '');
        }
        else if (type == Data_1.EBaseType.NOTIFICATION) {
            this.list = Notification_1.Notification.list(response);
            this.next = new Cursor((_f = (_e = (0, JsonUtils_1.findByFilter)(response, 'cursorType', 'Top')[0]) === null || _e === void 0 ? void 0 : _e.value) !== null && _f !== void 0 ? _f : '');
        }
    }
    return CursoredData;
}());
exports.CursoredData = CursoredData;
/**
 * The cursor to the batch of data to fetch.
 *
 * @public
 */
var Cursor = /** @class */ (function () {
    /**
     * @param cursor - The cursor string.
     */
    function Cursor(cursor) {
        this.value = cursor;
    }
    return Cursor;
}());
exports.Cursor = Cursor;
//# sourceMappingURL=CursoredData.js.map